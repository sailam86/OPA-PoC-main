{"version":3,"file":"ManifestPlugin.js","names":["ManifestPlugin","apply","compiler","hooks","compilation","tap","afterProcessAssets","chunk","chunks","manifest","id","name","files","sort","auxiliaryFiles","length","manifestFile","add","emitAsset","webpack","sources","RawSource","JSON","stringify"],"sources":["../../../src/webpack/plugins/ManifestPlugin.ts"],"sourcesContent":["import webpack from 'webpack';\nimport type { WebpackPlugin } from '../../types';\n\n/**\n * @category Webpack Plugin\n */\nexport class ManifestPlugin implements WebpackPlugin {\n  /**\n   * Apply the plugin.\n   *\n   * @param compiler Webpack compiler instance.\n   */\n  apply(compiler: webpack.Compiler) {\n    compiler.hooks.compilation.tap('TargetPlugin', (compilation) => {\n      compilation.hooks.afterProcessAssets.tap('TargetPlugin', () => {\n        for (const chunk of compilation.chunks) {\n          const manifest = {\n            id: chunk.id,\n            name: chunk.name,\n            files: [...chunk.files].sort(),\n            auxiliaryFiles: [...chunk.auxiliaryFiles].sort(),\n          };\n\n          if (manifest.files.length) {\n            const manifestFile = `${manifest.files[0]}.json`;\n            chunk.auxiliaryFiles.add(manifestFile);\n            compilation.emitAsset(\n              manifestFile,\n              new webpack.sources.RawSource(JSON.stringify(manifest))\n            );\n          }\n        }\n      });\n    });\n  }\n}\n"],"mappings":";;;;;;;AAAA;;;;AAGA;AACA;AACA;AACO,MAAMA,cAAN,CAA8C;EACnD;AACF;AACA;AACA;AACA;EACEC,KAAK,CAACC,QAAD,EAA6B;IAChCA,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CAA+B,cAA/B,EAAgDD,WAAD,IAAiB;MAC9DA,WAAW,CAACD,KAAZ,CAAkBG,kBAAlB,CAAqCD,GAArC,CAAyC,cAAzC,EAAyD,MAAM;QAC7D,KAAK,MAAME,KAAX,IAAoBH,WAAW,CAACI,MAAhC,EAAwC;UACtC,MAAMC,QAAQ,GAAG;YACfC,EAAE,EAAEH,KAAK,CAACG,EADK;YAEfC,IAAI,EAAEJ,KAAK,CAACI,IAFG;YAGfC,KAAK,EAAE,CAAC,GAAGL,KAAK,CAACK,KAAV,EAAiBC,IAAjB,EAHQ;YAIfC,cAAc,EAAE,CAAC,GAAGP,KAAK,CAACO,cAAV,EAA0BD,IAA1B;UAJD,CAAjB;;UAOA,IAAIJ,QAAQ,CAACG,KAAT,CAAeG,MAAnB,EAA2B;YACzB,MAAMC,YAAY,GAAI,GAAEP,QAAQ,CAACG,KAAT,CAAe,CAAf,CAAkB,OAA1C;YACAL,KAAK,CAACO,cAAN,CAAqBG,GAArB,CAAyBD,YAAzB;YACAZ,WAAW,CAACc,SAAZ,CACEF,YADF,EAEE,IAAIG,gBAAA,CAAQC,OAAR,CAAgBC,SAApB,CAA8BC,IAAI,CAACC,SAAL,CAAed,QAAf,CAA9B,CAFF;UAID;QACF;MACF,CAlBD;IAmBD,CApBD;EAqBD;;AA5BkD"}