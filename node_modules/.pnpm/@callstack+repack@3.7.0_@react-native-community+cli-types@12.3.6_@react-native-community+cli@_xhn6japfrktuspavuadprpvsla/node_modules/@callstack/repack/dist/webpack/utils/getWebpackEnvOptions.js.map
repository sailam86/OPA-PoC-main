{"version":3,"file":"getWebpackEnvOptions.js","names":["getWebpackEnvOptions","cliOptions","env","bundleFilename","context","config","root","reactNativePath","arguments","mode","bundle","dev","platform","minimize","minify","entryFile","entry","path","isAbsolute","startsWith","bundleOutput","sourceMapFilename","sourcemapOutput","assetsPath","assetsDest","start","undefined","devServer","port","DEFAULT_PORT","host","https","cert","key","hmr"],"sources":["../../../src/webpack/utils/getWebpackEnvOptions.ts"],"sourcesContent":["import path from 'path';\nimport type { CliOptions, WebpackEnvOptions } from '../../types';\nimport { DEFAULT_PORT } from '../../env';\n\nexport function getWebpackEnvOptions(\n  cliOptions: CliOptions\n): WebpackEnvOptions {\n  const env: WebpackEnvOptions = { bundleFilename: '' };\n\n  env.context = cliOptions.config.root;\n  env.reactNativePath = cliOptions.config.reactNativePath;\n\n  if ('bundle' in cliOptions.arguments) {\n    env.mode = cliOptions.arguments.bundle.dev ? 'development' : 'production';\n    env.platform = cliOptions.arguments.bundle.platform;\n    env.minimize =\n      cliOptions.arguments.bundle.minify ?? env.mode === 'production';\n\n    const { entryFile } = cliOptions.arguments.bundle;\n    env.entry =\n      path.isAbsolute(entryFile) || entryFile.startsWith('./')\n        ? entryFile\n        : `./${entryFile}`;\n\n    env.bundleFilename = cliOptions.arguments.bundle.bundleOutput;\n    env.sourceMapFilename = cliOptions.arguments.bundle.sourcemapOutput;\n    env.assetsPath = cliOptions.arguments.bundle.assetsDest;\n  } else {\n    env.mode = 'development';\n    env.platform = cliOptions.arguments.start.platform || undefined;\n    env.devServer = {\n      port: cliOptions.arguments.start.port ?? DEFAULT_PORT,\n      host: cliOptions.arguments.start.host,\n      https: cliOptions.arguments.start.https\n        ? {\n            cert: cliOptions.arguments.start.cert,\n            key: cliOptions.arguments.start.key,\n          }\n        : undefined,\n      hmr: true,\n    };\n  }\n\n  return env;\n}\n"],"mappings":";;;;;;;AAAA;;AAEA;;;;AAEO,SAASA,oBAAT,CACLC,UADK,EAEc;EACnB,MAAMC,GAAsB,GAAG;IAAEC,cAAc,EAAE;EAAlB,CAA/B;EAEAD,GAAG,CAACE,OAAJ,GAAcH,UAAU,CAACI,MAAX,CAAkBC,IAAhC;EACAJ,GAAG,CAACK,eAAJ,GAAsBN,UAAU,CAACI,MAAX,CAAkBE,eAAxC;;EAEA,IAAI,YAAYN,UAAU,CAACO,SAA3B,EAAsC;IACpCN,GAAG,CAACO,IAAJ,GAAWR,UAAU,CAACO,SAAX,CAAqBE,MAArB,CAA4BC,GAA5B,GAAkC,aAAlC,GAAkD,YAA7D;IACAT,GAAG,CAACU,QAAJ,GAAeX,UAAU,CAACO,SAAX,CAAqBE,MAArB,CAA4BE,QAA3C;IACAV,GAAG,CAACW,QAAJ,GACEZ,UAAU,CAACO,SAAX,CAAqBE,MAArB,CAA4BI,MAA5B,IAAsCZ,GAAG,CAACO,IAAJ,KAAa,YADrD;IAGA,MAAM;MAAEM;IAAF,IAAgBd,UAAU,CAACO,SAAX,CAAqBE,MAA3C;IACAR,GAAG,CAACc,KAAJ,GACEC,aAAA,CAAKC,UAAL,CAAgBH,SAAhB,KAA8BA,SAAS,CAACI,UAAV,CAAqB,IAArB,CAA9B,GACIJ,SADJ,GAEK,KAAIA,SAAU,EAHrB;IAKAb,GAAG,CAACC,cAAJ,GAAqBF,UAAU,CAACO,SAAX,CAAqBE,MAArB,CAA4BU,YAAjD;IACAlB,GAAG,CAACmB,iBAAJ,GAAwBpB,UAAU,CAACO,SAAX,CAAqBE,MAArB,CAA4BY,eAApD;IACApB,GAAG,CAACqB,UAAJ,GAAiBtB,UAAU,CAACO,SAAX,CAAqBE,MAArB,CAA4Bc,UAA7C;EACD,CAfD,MAeO;IACLtB,GAAG,CAACO,IAAJ,GAAW,aAAX;IACAP,GAAG,CAACU,QAAJ,GAAeX,UAAU,CAACO,SAAX,CAAqBiB,KAArB,CAA2Bb,QAA3B,IAAuCc,SAAtD;IACAxB,GAAG,CAACyB,SAAJ,GAAgB;MACdC,IAAI,EAAE3B,UAAU,CAACO,SAAX,CAAqBiB,KAArB,CAA2BG,IAA3B,IAAmCC,iBAD3B;MAEdC,IAAI,EAAE7B,UAAU,CAACO,SAAX,CAAqBiB,KAArB,CAA2BK,IAFnB;MAGdC,KAAK,EAAE9B,UAAU,CAACO,SAAX,CAAqBiB,KAArB,CAA2BM,KAA3B,GACH;QACEC,IAAI,EAAE/B,UAAU,CAACO,SAAX,CAAqBiB,KAArB,CAA2BO,IADnC;QAEEC,GAAG,EAAEhC,UAAU,CAACO,SAAX,CAAqBiB,KAArB,CAA2BQ;MAFlC,CADG,GAKHP,SARU;MASdQ,GAAG,EAAE;IATS,CAAhB;EAWD;;EAED,OAAOhC,GAAP;AACD"}